#include <iostream>
#include <vector>
#include <string>

using namespace std;

// -----------------------------------------------------------------------------
// ----------------------- Jeux -----------------------
// -----------------------------------------------------------------------------


// ------------ pileOuFace -----------
string pileOuFace (const vector<string> & player1, const vector<string> & player2){
    if (player1[1] == "pile")
    {
        cout << "Le gagnant est " << player1[0] << endl;
        return player1[0];
    }
    cout << "Le gagnant est " << player2[0] << endl;
    return player2[0];
}

// ------------ shifoumi -----------
string shifoumi(const vector<string> & player1, const vector<string> & player2) {
    //0 pour Pierre, 1 pour Papier, 2 pour Ciseaux
    for (size_t i = 1; i < player1.size(); i = i + 1) {
        if (player1[i] == player2[i]) {
            cout << "Egalite !" << endl;
        }
        else if ((player1[i] == "0" && player2[i] == "2") || (player1[i] == "1" && player2[i] == "0") || (player1[i] == "2" && player2[i] == "1")) {
            return player1[0];
        }
        else {
            return player2[0];
        }
    }
    return "aucun gagant";
}

// ------------ justePrix -----------
string justePrix(const vector<string> & player1, const vector<string> & player2) {
    string nombreSecret = "67";
    for (size_t i = 1; i < player1.size(); i = i + 1) {
        if (player1[i] > nombreSecret) {
            cout <<  player1[0] << " votre nombre est trop grand." << endl;
        }
        else if (player1[i] < nombreSecret) {
            cout <<  player1[0] << " votre nombre est trop petit." << endl;
        }
        if (player2[i] > nombreSecret) {
            cout << player2[0] << " votre nombre est trop grand." << endl;
        }
        else if (player2[i] < nombreSecret) {
            cout << player2[0] << " votre nombre est trop petit." << endl;
        }
        if (player1[i] == nombreSecret) return player1[0];
        if (player2[i] == nombreSecret) return player2[0];
    }
    return "erreur";
}

// ------------ justePrix -----------
string jeuDuCailloux (const vector<string> & player1, const vector<string> & player2)
{
    int count (0) ;
    int result1 (3) ;
    int result2 (3) ;
    string winner ("Le gagnant est ") ;
    while (true)
    {
        if (count % 2 == 0)
        {
            cout << player1[0] << " cache " << player1[count+1] <<" cailloux et " << player2[0] << " pense qu'elle en a cache " << player2[count+1] << endl ;
        }
        else
        {
            cout << player2[0] << " cache " << player2[count+1] <<" cailloux et " << player1[0] << " pense qu'elle en a cache " << player1[count+1] << endl ;
        }
        if ((player1[count+1] == player2[count+1] && (count % 2) == 0) ) // 2 doit deviner, a raison, donc prend le nombre que 1 a caché
        {
            result2 += std::stoi(player1[count+1]) ;
            result1 -= std::stoi(player1[count+1]) ;
            cout << player2[0] << " gagne la manche" << endl ;
            cout << result1 << endl << result2 << endl << endl ;
            count += 1 ;
        }
        else if(player1[count+1] != player2[count+1] && (count % 2) == 1) // 1 doit deviner, a tord, donc 2 prend le nombre que 2 a caché
        {
            result2 += std::stoi(player2[count+1]) ;
            result1 -= std::stoi(player2[count+1]) ;
            cout << player2[0] << " gagne la manche" << endl ;
            cout << result1 << endl << result2 << endl << endl ;
            count += 1 ;
        }
        else if ((player1[count+1] == player2[count+1] && (count % 2) == 1) ) // 1 doit deviner, a raison, donc prend le nombre que 2 a caché
        {
            result2 -= std::stoi(player2[count+1]) ;
            result1 += std::stoi(player2[count+1]) ;
            cout << player1[0] << " gagne la manche" << endl ;
            cout << result1 << endl << result2 << endl << endl ;
            count += 1 ;
        }
        else // 2 doit deviner, a tord,  1 donc prend le nombre que 1 a caché
        {
            result2 -= std::stoi(player1[count+1]) ;
            result1 += std::stoi(player1[count+1]) ;
            count += 1 ;
            cout << player1[0] << " gagne la manche" << endl ;
            cout << result1 << endl << result2 << endl << endl ;
        }
        if (result1 < 1 || result2 < 1)
        {
            winner += player1[0] ;
            return winner ;
        }
    }
    return winner ;
}


// -----------------------------------------------------------------------------
// ----------------------- Tournoi -----------------------
// -----------------------------------------------------------------------------
void jouerMatchPile(vector<pair<string, int>> & points, const string & team1, const string & team2) {
    cout << team1 << " vs " << team2 << ": ";
    string gagnant = pileOuFace({team1, "face"}, {team2, "pile"});
    for (auto & equipe : points) {
        if (equipe.first == gagnant) {
            equipe.second = equipe.second + 1;
            break;
        }
    }
}

void afficherPoints(const vector<pair<string, int>> & points) {
    string gagnant = points[0].first;
    int meilleurScore = points[0].second;
    cout << "Les points de chaque equipe sont :" << endl;
    for (size_t i = 0; i < points.size(); i=i+1) {
        if (points[i].second > meilleurScore) {
            gagnant = points[i].first;
            meilleurScore = points[i].second;
        }
        cout << points[i].first << " : " << points[i].second << " points" << endl;
    }
    cout << "Le gagnant du tournoi est : " << gagnant << endl;
}


// ------------ tournoiLigue1 -----------

void tournoiLigue1(const vector<string> & teams) {
    vector<pair<string, int>> points;

    for (const auto & equipe : teams) {
        points.emplace_back(equipe, 0);
    }

    for (size_t i = 0; i < teams.size(); i=i+1) {
        for (size_t j = i + 1; j < teams.size(); j=j+1) {
            jouerMatchPile(points, teams[i], teams[j]);
        }
    }
    afficherPoints(points);

}

int main() {
    vector<string> equipes = {"Equipe1", "Equipe2", "Equipe3", "Equipe4"};
    tournoiLigue1 (equipes);

    /* test jeux
    cout << pileOuFace({"Coline","face"}, {"Marie", "pile"})  << endl;
    cout << shifoumi({"Coline","1", "2"}, {"Marie", "1", "1"})  << endl;
    cout << justePrix({"Coline","70", "67"}, {"Marie", "60", "66"})  << endl;
    cout << jeuDuCailloux({"Coline","2", "3", "3"}, {"Marie", "2", "3", "1"})  << endl;*/
    return 0;
}
